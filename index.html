<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Stitch">
    <meta name="theme-color" content="#3b82f6">
    <title>Maria's Stitch App ğŸŒº</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1 class="app-title">ğŸŒº Tareas de Maria ğŸŒº</h1>
            <div class="stitch-container">
                <img src="stich_hola2.png" alt="Stitch" class="stitch-image">
            </div>
            
            <!-- Selector de Usuario -->
            <div class="user-selector">
                <label class="switch-label">
                    <span class="user-option maria-option active">Maria</span>
                    <label class="switch">
                        <input type="checkbox" id="userTypeSwitch">
                        <span class="slider"></span>
                    </label>
                    <span class="user-option super-option">Super Usuario</span>
                </label>
            </div>
            
            <!-- Formulario de Login -->
            <div class="login-form">
                <input type="password" id="passwordInput" placeholder="ContraseÃ±a" class="password-input">
                <button id="loginButton" class="btn-primary">Entrar âœ¨</button>
                <p id="loginError" class="error-message"></p>
            </div>
        </div>
    </div>

    <!-- Pantalla Principal - Calendario -->
    <div id="mainScreen" class="screen">
        <!-- Stitch flotante decorativo -->
        <div class="floating-stitch">
            <img src="stich_hola2.png" alt="Stitch" class="stitch-float">
        </div>
        
        <div class="header">
            <h2 id="welcomeMessage">Bienvenida, Maria! ğŸŒº</h2>
            <button id="logoutButton" class="btn-logout">Salir</button>
        </div>

        <!-- Hucha -->
        <div class="piggy-bank-container">
            <div class="piggy-bank">
                <div class="piggy-icon">
                    <img src="hucha_stich.png" alt="Hucha Stitch" class="hucha-stitch-img">
                </div>
                <div class="piggy-info">
                    <div class="piggy-label">Hucha de Maria</div>
                    <div class="piggy-amount" id="piggyBankAmount">0.00â‚¬</div>
                </div>
                <button id="editPiggyBank" class="btn-edit-piggy" style="display: none;">âœï¸ Editar Hucha</button>
            </div>
        </div>

        <!-- Barra de Progreso de Puntos -->
        <div class="points-container">
            <div class="points-header">
                <span>Progreso Semanal</span>
                <span id="pointsDisplay">0â‚¬ / 10â‚¬</span>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <div class="bonus-info">
                <span id="bonusText">ğŸŒº Completa todas las tareas y obtendrÃ¡s euritos extras!</span>
            </div>
        </div>

        <!-- Controles de Semana -->
        <div class="week-controls">
            <button id="prevWeek" class="btn-week">â—€ Semana Anterior</button>
            <h3 id="weekDisplay">Semana del 9 - 15 Dic 2025</h3>
            <button id="nextWeek" class="btn-week">Semana Siguiente â–¶</button>
        </div>

        <!-- Botones de AdministraciÃ³n (solo Super Usuario) -->
        <div id="adminControls" class="admin-controls" style="display: none;">
            <button id="fillWeekBtn" class="btn-admin btn-fill">ğŸ“‹ Rellenar Semana AutomÃ¡ticamente</button>
            <button id="addBonusBtn" class="btn-admin">â• AÃ±adir BonificaciÃ³n</button>
            <button id="removeBonusBtn" class="btn-admin">â– Quitar BonificaciÃ³n</button>
            <button id="clearWeekBtn" class="btn-admin btn-danger">ğŸ—‘ï¸ Limpiar Semana</button>
        </div>

        <!-- Calendario Semanal -->
        <div id="calendar" class="calendar">
            <!-- Los dÃ­as se generarÃ¡n dinÃ¡micamente -->
        </div>

        <!-- Modal para AÃ±adir/Editar Tarea -->
        <div id="taskModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3 id="modalTitle">Nueva Tarea</h3>
                <form id="taskForm">
                    <input type="text" id="taskTitle" placeholder="TÃ­tulo de la tarea" required>
                    <textarea id="taskDescription" placeholder="DescripciÃ³n (opcional)"></textarea>
                    <select id="taskDay">
                        <option value="0">Lunes</option>
                        <option value="1">Martes</option>
                        <option value="2">MiÃ©rcoles</option>
                        <option value="3">Jueves</option>
                        <option value="4">Viernes</option>
                        <option value="5">SÃ¡bado</option>
                        <option value="6">Domingo</option>
                    </select>
                    <div class="form-buttons">
                        <button type="submit" class="btn-primary">Guardar</button>
                        <button type="button" id="cancelTaskBtn" class="btn-secondary">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="drive-config.js"></script>
    <script src="app.js"></script>
</body>
</html>
